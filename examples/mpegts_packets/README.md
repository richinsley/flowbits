<h1 align="center">
  mpegts_packets
</h1>

In this example, we'll be using a flowbits Bitstream decoder to decode and display the fields of MPEG transport stream packets.  Information on the MPEG transport stream format can be found [here](https://en.wikipedia.org/wiki/MPEG_transport_stream).

## Instructions

### Download mpegts_packets example

```bash
git clone https://github.com/richinsley/flowbits.git
```

### Compile mpegts_packets example
```bash
cd flowbits/examples/mpegts_packets && go build
```

### Run ffmpeg to create example stream

```bash
ffmpeg -f lavfi -i testsrc=size=320x240:rate=30 -preset ultrafast -vcodec libx264 -tune zerolatency -b 100k -f mpegts "udp://127.0.0.1:1234?pkt_size=188&buffer_size=65535"
```

### Run the mpegts_packets to decode the mpegts packet header
```bash
./mpegts_packets 127.0.0.1:1234
```

### Example output:
```
transport_error_indicator		    false
payload_unit_start_indicator		true
transport_priority			        false
pid					                0x100
transport_scrambling_control		0b0
adaption_field_control			    0b11
continuity_counter			        0xd
-----Adaption Field:
	discontinuity_indicator			        false
	random_access_indicator			        false
	elementary_stream_priority_indicator	false
	pcr_flag				                true
	opcr_flag				                false
	splicing_point_flag			            false
	transport_private_data_flag		        false
	adaptation_field_extension_flag		    false
00000000|00000000|00000001|11100000|00000000|00000000|10000000|10000000
00000101|00100101|00110011|10011101|10100000|11000001|00000000|00000000
00000000|00000001|00001001|11110000|00000000|00000000|00000000|00000001
01000001|10011010|01000000|01001010|00000011|00101100|00000000|00000000
00000001|01000001|00000011|00101001|10100100|00000100|10100000|00110010
11000000|00000000|00000000|00000001|01000001|00000001|10010010|01101001
00000001|00101000|00101011|00001000|01111110|00101011|10101000|10111110
10101010|10101010|10101010|10101010|10101011|11111111|01111011|11111110
10101011|10101010|10101010|10101010|10101010|10101010|11111000|10101110
10101011|10101010|10101010|10101010|10101010|10101010|11111110|11101111
01111011|11011110|11111111|10101010|10101010|10101010|10101010|10101010
11100001|00001111|11000101|01110101|01011111|01010101|01010101|01011010
11111111|11111110|11110111|11010101|01110001|01111010|11010110|10110101
11100001|10001111|00001000|01111110|00101011|10111011|11101110|11111111
11111011|10111111|10111011|10111011|10111101|11111111|11111111|11111000
01000011|11110001|01011100|01011100|01011111|00010111|01111110|00101011
11111110|11101110|11101110|11110111|11101110|11111011|10111011|10111011
10111011|10111011|10111111|11111111|10101101|01111000|01000011|11110001
01011100|01011100|01011111|00010111|00010111|00010111|00010111|00010111
00010111|00010111|00010111|00010111|00010111|11111111|01111011|11011110
11111100|01010110|11111011|10111011|10111011|10111101|11101111|10000100
00100101|11111111|10111101|11111000|01000010|01001111|11011110|11101111
01111110|00100010|00110111|00000001|11000000|01000110|00101101|11001001
```